/*
 * Tiny Scrollbar 1.8
 * http://www.baijs.nl/tinyscrollbar/
 *
 * Copyright 2012, Maarten Baijs
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/gpl-2.0.php
 *
 * Date: 26 / 07 / 2012
 * Depends on library: jQuery
 *
 */
(function(a){function b(b,c){function r(){return d.update(),t(),d}function s(){var a=m.toLowerCase();j.obj.css(l,n/h.ratio),g.obj.css(l,-n),p.start=j.obj.offset()[l],h.obj.css(a,i[c.axis]),i.obj.css(a,i[c.axis]),j.obj.css(a,j[c.axis])}function t(){q?f.obj[0].ontouchstart=function(a){1===a.touches.length&&(u(a.touches[0]),a.stopPropagation())}:(j.obj.bind("mousedown",u),i.obj.bind("mouseup",w)),c.scroll&&window.addEventListener?(e[0].addEventListener("DOMMouseScroll",v,!1),e[0].addEventListener("mousewheel",v,!1)):c.scroll&&(e[0].onmousewheel=v)}function u(b){var c=parseInt(j.obj.css(l),10);p.start=k?b.pageX:b.pageY,o.start=c=="auto"?0:c,q?(document.ontouchmove=function(a){a.preventDefault(),w(a.touches[0])},document.ontouchend=x):(a(document).bind("mousemove",w),a(document).bind("mouseup",x),j.obj.bind("mouseup",x))}function v(b){if(g.ratio<1){var d=b||window.event,e=d.wheelDelta?d.wheelDelta/120:-d.detail/3;n-=e*c.wheel,n=Math.min(g[c.axis]-f[c.axis],Math.max(0,n)),j.obj.css(l,n/h.ratio),g.obj.css(l,-n);if(c.lockscroll||n!==g[c.axis]-f[c.axis]&&n!==0)d=a.event.fix(d),d.preventDefault()}}function w(a){g.ratio<1&&(q?o.now=Math.min(i[c.axis]-j[c.axis],Math.max(0,o.start+(p.start-(k?a.pageX:a.pageY)))):o.now=Math.min(i[c.axis]-j[c.axis],Math.max(0,o.start+((k?a.pageX:a.pageY)-p.start))),n=o.now*h.ratio,g.obj.css(l,-n),j.obj.css(l,o.now))}function x(){a(document).unbind("mousemove",w),a(document).unbind("mouseup",x),j.obj.unbind("mouseup",x),document.ontouchmove=document.ontouchend=null}var d=this,e=b,f={obj:a(".viewport",b)},g={obj:a(".overview",b)},h={obj:a(".scrollbar",b)},i={obj:a(".track",h.obj)},j={obj:a(".thumb",h.obj)},k=c.axis==="x",l=k?"left":"top",m=k?"Width":"Height",n=0,o={start:0,now:0},p={},q="ontouchstart"in document.documentElement?!0:!1;return this.update=function(a){f[c.axis]=f.obj[0]["offset"+m],g[c.axis]=g.obj[0]["scroll"+m],g.ratio=f[c.axis]/g[c.axis],h.obj.toggleClass("disable",g.ratio>=1),i[c.axis]=c.size==="auto"?f[c.axis]:c.size,j[c.axis]=Math.min(i[c.axis],Math.max(0,c.sizethumb==="auto"?i[c.axis]*g.ratio:c.sizethumb)),h.ratio=c.sizethumb==="auto"?g[c.axis]/i[c.axis]:(g[c.axis]-f[c.axis])/(i[c.axis]-j[c.axis]),n=a==="relative"&&g.ratio<=1?Math.min(g[c.axis]-f[c.axis],Math.max(0,n)):0,n=a==="bottom"&&g.ratio<=1?g[c.axis]-f[c.axis]:isNaN(parseInt(a,10))?n:parseInt(a,10),s()},r()}a.tiny=a.tiny||{},a.tiny.scrollbar={options:{axis:"y",wheel:40,scroll:!0,lockscroll:!0,size:"auto",sizethumb:"auto"}},a.fn.tinyscrollbar=function(c){var d=a.extend({},a.tiny.scrollbar.options,c);return this.each(function(){a(this).data("tsb",new b(a(this),d))}),this},a.fn.tinyscrollbar_update=function(b){return a(this).data("tsb").update(b)}})(jQuery)